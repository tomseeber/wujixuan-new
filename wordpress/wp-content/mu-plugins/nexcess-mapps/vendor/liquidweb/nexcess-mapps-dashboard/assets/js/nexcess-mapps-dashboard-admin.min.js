function confirmSomethingChecked(){var e="missed";return jQuery("input.nexcess-mapps-dashboard-plugin-input-available").each(function(){if(jQuery(this).is(":checked"))return!(e="proceed")}),e}function manageInstallerSubmitAccess(){toggleInstallerSubmit("missed"===confirmSomethingChecked()?"disable":"enable"),jQuery("li.nexcess-mapps-dashboard-plugin-list-single").on("change","input.nexcess-mapps-dashboard-plugin-input-available",function(e){(this.checked&&toggleInstallerSubmit("enable"),this.checked)||toggleInstallerSubmit("missed"===confirmSomethingChecked()?"disable":"enable")})}function setInstallStatus(e){"kickoff"===e&&toggleInstallerButtons("disable"),"installing"===e&&(toggleInstallerButtons("disable"),toggleSpinnerDisplay("show"),toggleInstallOverlay("display")),"completed"===e&&(toggleInstallOverlay("remove"),toggleSpinnerDisplay("hide"),toggleInstallerButtons("enable"))}function toggleInstallerSubmit(e){"disable"===e&&jQuery("button#nexcess-button-run-install").attr("disabled","disabled"),"enable"===e&&jQuery("button#nexcess-button-run-install").removeAttr("disabled")}function toggleInstallerButtons(e){jQuery("button.nexcess-self-install-single-button").each(function(){"disable"===e&&jQuery(this).attr("disabled","disabled"),"enable"===e&&jQuery(this).removeAttr("disabled")})}function toggleSpinnerDisplay(e){"show"===e&&jQuery("span.nexcess-spinner").css("visibility","visible"),"hide"===e&&jQuery("span.nexcess-spinner").css("visibility","hidden")}function toggleInstallOverlay(e){"display"===e&&jQuery("body").append(PlatformInstallAdmin.overlayWindow),"remove"===e&&jQuery("body").find("div#nexcess-installer-status-screen").remove()}function clearFreemiusNotices(){jQuery(".fs-notice").each(function(){jQuery(this).remove()})}jQuery(document).ready(function(t){var s=t("body.nexcess-selfinstall-body"),n=(t("div.nexcess-mapps-dashboard-page-wrap"),t("div.nexcess-mapps-dashboard-page-wrap div.nexcess-mapps-dashboard-intro-wrap"),t("div.nexcess-mapps-dashboard-page-wrap div.nexcess-mapps-dashboard-failed-installs-wrap"));t("div.nexcess-mapps-dashboard-page-wrap form#nexcess-mapps-dashboard-form");t(document).on("keyup",function(e){27==e.keyCode&&s.is(":visible")&&setInstallStatus("completed")}),0<s.length&&(clearFreemiusNotices(),manageInstallerSubmitAccess(),t(".nexcess-mapps-dashboard-button-reset-choices-action").on("click","button",function(){if(!confirm(PlatformInstallAdmin.resetText))return!1}),t(".nexcess-mapps-dashboard-button-select-all-action").on("click","button",function(e){var s=t("div.nexcess-mapps-dashboard-plugin-group").find("input.nexcess-mapps-dashboard-plugin-input");if(0===s.length)return!1;t(s).each(function(){!1===t(this).is(":disabled")&&t(this).prop("checked",!0)}),manageInstallerSubmitAccess()}),t(".nexcess-mapps-dashboard-group-action").on("click","button",function(e){var s=t(this).attr("value"),n=t('div[data-group="'+s+'"]').find("input.nexcess-mapps-dashboard-plugin-input");if(0===n.length)return!1;t(n).each(function(){!1===t(this).is(":disabled")&&t(this).prop("checked",!0)}),manageInstallerSubmitAccess()}),n.on("click",".nexcess-mapps-dashboard-failed-dismiss",function(){var e=t(this).data("nonce");n.fadeOut(500,function(){n.remove()});var s={action:"nexcess_selfinstall_clear_failed_notice",nonce:e};jQuery.post(ajaxurl,s,null,"json")}),s.on("click",".notice-dismiss",function(){s.find(".nexcess-installer-notice.is-dismissible").remove()}))});