/** This file is part of the Nexcess MAPPS MU plugin and was generated automatically */
(()=>{"use strict";var e={418:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,s,c=o(e),p=1;p<arguments.length;p++){for(var l in a=Object(arguments[p]))n.call(a,l)&&(c[l]=a[l]);if(t){s=t(a);for(var u=0;u<s.length;u++)r.call(a,s[u])&&(c[s[u]]=a[s[u]])}}return c}},251:(e,t,n)=>{n(418);var r=n(363),o=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,n){var r,i={},p=null,l=null;for(r in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:p,ref:l,props:i,_owner:a.current}}t.jsx=p,t.jsxs=p},893:(e,t,n)=>{e.exports=n(251)},363:e=>{e.exports=React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{const e=wp.i18n;var t=n(893);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var p=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,wp.element.Component);var r,s,c,p=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=p.call(this,e)).state={home:e.home},t}return r=l,(s=[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("home");t.addEventListener("keyup",(function(){e.setState({home:t.value})}))}},{key:"render",value:function(){return(0,t.jsxs)("fieldset",{hidden:this.state.home===this.props.home,children:[(0,t.jsx)("legend",{className:"screen-reader-text",children:(0,t.jsx)("span",{children:(0,e.__)("Search and Replace","nexcess-mapps")})}),(0,t.jsxs)("label",{htmlFor:"mapps-domain-search-replace",children:[(0,t.jsx)("input",{name:"mapps-domain-search-replace",type:"checkbox",id:"mapps-domain-search-replace",checked:!0}),(0,e.__)("Automatically perform search and replace on my database content","nexcess-mapps")]})]})}}])&&o(r.prototype,s),c&&o(r,c),l}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,wp.element.Component);var r,o,i,a=d(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={apiFailure:!1,changed:!1,dnsFailure:!1,errorMessage:null,newDomain:null,skipDnsVerification:!1,submitting:!1},t.handleDomainInputChanges=t.handleDomainInputChanges.bind(h(t)),t.handleDnsValidationChanges=t.handleDnsValidationChanges.bind(h(t)),t.submitDomainChange=t.submitDomainChange.bind(h(t)),t}return r=s,(o=[{key:"domainHasChanged",value:function(){return this.state.newDomain&&this.props.currentDomain!==this.state.newDomain}},{key:"handleDnsValidationChanges",value:function(e){this.setState({skipDnsVerification:e.target.checked})}},{key:"handleDomainInputChanges",value:function(e){this.setState({dnsFailure:!1,newDomain:e.target.value})}},{key:"submitDomainChange",value:function(e){var t=this;if(e.preventDefault(),!this.state.submitting){this.setState({apiFailure:!1,dnsFailure:!1,errorMessage:null,submitting:!0});var n={method:"POST",body:new URLSearchParams({_mapps_nonce:this.props.nonce,action:"mapps-change-domain",domain:this.state.newDomain,skipDnsVerification:this.state.skipDnsVerification?1:0})};fetch(this.props.ajaxUrl,n).then((function(e){return e.json()})).then((function(e){if(e.success)return t.setState({changed:!0});var n=e.data[0]||{};return"mapps-missing-dns"===n.code?t.setState({dnsFailure:!0,submitting:!1}):"mapps-change-domain-failure"===n.code?t.setState({apiFailure:!0,submitting:!1}):void t.setState({errorMessage:n.message,submitting:!1})}))}}},{key:"render",value:function(){return(0,t.jsxs)("form",{method:"post",onSubmit:this.submitDomainChange,children:[(0,t.jsxs)("div",{className:"mapps-inline-form",children:[(0,t.jsxs)("fieldset",{children:[(0,t.jsx)("label",{htmlFor:"mapps-new-domain",className:"screen-reader-text",children:(0,e.__)("Domain","nexcess-mapps")}),(0,t.jsx)("input",{name:"mapps-new-domain",id:"mapps-new-domain",type:"text",className:"code",placeholder:"example.com",onKeyUp:this.handleDomainInputChanges,disabled:this.state.submitting,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"button button-primary",disabled:!this.domainHasChanged()||this.state.submitting,children:(0,e.__)("Go Live!","nexcess-mapps")}),(0,t.jsx)("input",{name:"_mapps_nonce",type:"hidden",value:this.props.nonce})]}),(0,t.jsxs)("div",{hidden:!this.state.newDomain,children:[(0,t.jsx)("p",{className:"description mapps-change-domain-mb",children:(0,e.__)('When you click "Go Live!", we\'ll immediately change your domain. This may take a few minutes, after which you will need to log in again on the new live domain.',"nexcess-mapps")}),(0,t.jsxs)("label",{htmlFor:"mapps-skip-dns-verification",className:"mapps-change-domain-verification-checkbox",children:[(0,t.jsx)("input",{name:"mapps-skip-dns-verification",id:"mapps-skip-dns-verification",type:"checkbox",onChange:this.handleDnsValidationChanges}),(0,e.__)("Skip DNS record validation","nexcess-mapps")]}),(0,t.jsx)("p",{className:"description",children:(0,e.__)("By default, we check that the appropriate DNS records are set before changing your domain. If you're behind a proxy or are using another more advanced DNS technique, you may wish to skip this validation.","nexcess-mapps")}),this.state.skipDnsVerification&&(0,t.jsxs)("div",{className:"notice notice-error notice-alt inline mapps-change-domain-mt",children:[(0,t.jsx)("p",{children:(0,e.__)('Your site may become inaccessible if its DNS records are invalid, so please double-check your DNS configuration before clicking "Go Live!"',"nexcess-mapps")}),(0,t.jsx)("p",{children:(0,e.__)("If anything does go wrong, please reach out to support and we'll get you up and running!","nexcess-mapps")})]})]}),this.state.dnsFailure&&(0,t.jsxs)("div",{className:"notice notice-error notice-alt inline mapps-change-domain-mt",children:[(0,t.jsx)("p",{children:(0,e.sprintf)((0,e.__)("The DNS records for %s do not currently point to this site.","nexcess-mapps"),this.state.newDomain)}),(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:this.props.dnsHelpUrl,target:"_blank",rel:"noopener noreferrer",children:(0,e.__)("Learn more about changing your DNS records","nexcess-mapps")})})]}),this.state.apiFailure&&(0,t.jsxs)("div",{className:"notice notice-error notice-alt inline mapps-change-domain-mt",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:(0,e.__)("Something went wrong updating your site's domain name.","nexcess-mapps")})}),(0,t.jsx)("p",{children:(0,e.__)("You may want to try again by logging into the Nexcess Portal or contacting support.","nexcess-mapps")}),(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:this.props.portalUrl,className:"button button-secondary",target:"_top",rel:"noopener noreferrer",children:(0,e.__)("Manage Domain Options","nexcess-mapps")})})]}),this.state.errorMessage&&(0,t.jsxs)("div",{className:"notice notice-error notice-alt inline mapps-change-domain-mt",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:(0,e.__)("Something went wrong updating your site's domain name.","nexcess-mapps")})}),(0,t.jsx)("p",{children:this.state.errorMessage})]}),this.state.changed&&(0,t.jsx)("div",{className:"notice notice-success notice-alt inline mapps-change-domain-mt",children:(0,t.jsx)("p",{children:(0,e.__)("Your domain is being updated, and will be available shortly!","nexcess-mapps")})})]})}}])&&u(r.prototype,o),i&&u(r,i),s}();function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=document.getElementById("mapps-change-domain-form");w&&wp.element.render(wp.element.createElement(b,v(v({},window.MAPPS.domainChange),{},{ajaxUrl:window.ajaxurl})),w);var x=document.getElementById("home"),_=document.getElementById("home-description");if(x&&_){var O=document.createElement("div");O.id="mapps-domain-change-opt-in",_.after(O),wp.element.render(wp.element.createElement(p,{home:x.value}),document.getElementById(O.id))}wp.hooks.addFilter("site_status_test_result","core",(function(e){return"https_status"===e.test&&(e.actions=e.actions.replace(window.MAPPS.httpsUpdateUrl.default,window.MAPPS.httpsUpdateUrl.updated)),e}))})()})();